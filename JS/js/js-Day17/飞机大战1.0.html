<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>飞机大战1.0</title>
    <style>
        *{padding: 0;margin: 0;}
        #bg{
            width: 320px;
            height: 568px;
            margin:0 auto;
            background: url("img/image/background_1.png");
            position: relative;
            overflow: hidden;
        }
        #box{
            width: 66px;
            height:80px;
            background: url("img/image/我的飞机.gif");
            position: absolute;
            top: 480px;
            left:126px;
        }
    </style>
    <script src="js/moveUti.js"></script>
</head>
<body>
    <div id="bg">
        <div id="box"></div>
    </div>
    <input type="button" id="btn1" value="开启飞机作战"/>
    <script>
        var OdivBox=document.getElementById("box");
        var OdivBg=document.getElementById("bg");
//        var Btn=document.getElementById("btn1");
        var Bullet=[];//子弹数组
//        Btn.onclick=function () {
            OdivBox.onmousemove=function(e) {
                e = e || window.event;
                var etop = e.clientY;
                var eleft = e.clientX;
                //获取鼠标在OdivBg中的点击位置
                e = e || window.event;
                var top = etop - 40;
                var left = eleft - 510;
                if (top < 0) {
                    top = 0;
                }
                if (top > 568 - 66) {
                    top = 502;
                }
                if (left < -33) {
                    left = -33;
                }
                if (left > 287) {
                    left = 287;
                }
                OdivBox.style.top = top + "px";
                OdivBox.style.left = left + "px";
            }

            Get();
            Movebullet();
            GetOtherPlane1();
//            创建子弹
            function Get() {
                var timer=setInterval(function () {
                    var Odiv1=document.createElement("div");
                    Odiv1.style.width="6px";
                    Odiv1.style.height="14px";
                    Odiv1.style.background="lightcoral";
                    Odiv1.style.position="absolute";
                    Odiv1.style.top=OdivBox.offsetTop+"px";
                    Odiv1.style.left=OdivBox.offsetLeft+33+"px";
                    Odiv1.style.background="url(img/image/bullet1.png) no-repeat";
                    OdivBg.appendChild(Odiv1);
                    Bullet.push(Odiv1);
                },200)
            }
//            子弹移动
            function Movebullet() {
                var timer=setInterval(function () {
//                   var Bullet=document.getElementsByClassName("bullet1");
                    for(var i=0;i<Bullet.length;i++){
                        Bullet[i].style.top=Bullet[i].offsetTop-25+"px";
                    }
                    for(var j=0;j<Bullet.length;j++){
                        if(Bullet[j].style.top<-10+"px"){
                            OdivBg.removeChild(Bullet[j]);
                            Bullet.splice(j,1);
                            j--;
                        }
                    }
                },100)
            }
//        创建敌机1
            function GetOtherPlane1() {
                var i=0;
                var plan1=[];
                var timer=setInterval(function () {
                    var OtherPlane1=document.createElement("div");
                    OtherPlane1.style.width="34px";
                    OtherPlane1.style.height="24px";
                    OtherPlane1.style.position="absolute";
                    var Other1=Math.floor(Math.random()*320)-10;
                    OtherPlane1.style.left=Other1+"px";
                    OtherPlane1.className="plan1";
                    OtherPlane1.style.background="url(img/image/enemy1_fly_1.png)no-repeat";
                    OdivBg.appendChild(OtherPlane1);
                    var timer1=setInterval(function () {
                        OtherPlane1.style.top=OtherPlane1.offsetTop+4+"px";
                    },50);
                    plan1.push(OtherPlane1);
                    i++;
                    for(var j=0;j<plan1.length;j++){
                        if(plan1[j].style.top>570+"px"){
                            i--;
                            OdivBg.removeChild(plan1[j]);
                            plan1.splice(j,1);
                            j--;
                        }
                    }
                    if(i==12){
                        clearInterval(timer);
                    }

                },1600)

            }
//           创建敌机2
        GetOtherPlane2();
        function GetOtherPlane2() {
            var i=0;
            var plan1=[];
            var timer=setInterval(function () {
                var OtherPlane1=document.createElement("div");
                OtherPlane1.style.width="45px";
                OtherPlane1.style.height="60px";
                OtherPlane1.style.position="absolute";
                var Other1=Math.floor(Math.random()*320)-10;
                OtherPlane1.style.left=Other1+"px";
                OtherPlane1.className="plan2";
              //  OtherPlane1.className="OtherPlane";
                OtherPlane1.style.background="url(img/image/enemy3_fly_1.png)no-repeat";
                OdivBg.appendChild(OtherPlane1);
                var timer1=setInterval(function () {
                    OtherPlane1.style.top=OtherPlane1.offsetTop+10+"px";
                },50);
                plan1.push(OtherPlane1);
                i++;
                for(var j=0;j<plan1.length;j++){
                    if(plan1[j].style.top>570+"px"){
                        i--;
                        OdivBg.removeChild(plan1[j]);
                        plan1.splice(j,1);
                        j--;
                    }
                }
                if(i==12){
                    clearInterval(timer);
                }

            },1500)

        }
//        创建敌机3
        GetOtherPlane3();
        function GetOtherPlane3() {
            var i=0;
            var plan1=[];
            var timer=setInterval(function () {
                var OtherPlane1=document.createElement("div");
                OtherPlane1.style.width="110px";
                OtherPlane1.style.height="170px";
                OtherPlane1.style.position="absolute";
                var Other1=Math.floor(Math.random()*320)-10;
                OtherPlane1.style.left=Other1+"px";
                OtherPlane1.className="plan3";
                OtherPlane1.style.background="url(img/image/enemy2_fly_1.png)no-repeat";
                OdivBg.appendChild(OtherPlane1);
                var timer1=setInterval(function () {
                    OtherPlane1.style.top=OtherPlane1.offsetTop+8+"px";
                },50);
                plan1.push(OtherPlane1);
                i++;
                for(var j=0;j<plan1.length;j++){
                    if(plan1[j].style.top>570+"px"){
                        i--;
                        OdivBg.removeChild(plan1[j]);
                        plan1.splice(j,1);
                        j--;
                    }
                }
                if(i==12){
                    clearInterval(timer);
                }

            },3000)

        }


    </script>
</body>
</html>