(function(a,b){var c=a.requireDefine||a.define&&a.define.amd&&a.define;if(typeof c=="function")c("gamepopup",["require","exports","module","jquery"],b);else{var d={jquery:a.jQuery},e=function(a){return d[a]},f={exports:{}};b.apply(a,[e,f.exports,f]),a.GamePopup=f.exports}})(this,function(a,b,c){var d=a("jquery");(function(a){if(a.__addCss__)return;var b="__CSS__";if(document.createStyleSheet){var c=null;for(var d=0,e=document.styleSheets;d<e.length;d++)if(e[d].ID===b){c=e[d];break}c||(c=document.createStyleSheet(""),c.ID=b,c.cssText=""),a.__addCss__=function(a){c.cssText+=a}}else{var f=document.getElementById(b);if(!f){f=document.createElement("style"),f.id=b,f.type="text/css",f.textContent="";var g=document.head||document.getElementsByTagName("head")[0]||document.documentElement;g.appendChild(f)}a.__addCss__=function(a){f.textContent+=a}}})(window),__addCss__('.gb-zqfix-box-v2{font-size:12px;font-family:"Simsun";position:fixed;_position:absolute;bottom:15px;right:15px}.gb-zqfix-v2-c1{overflow:hidden;width:52px;height:142px;background:url("http://ue1.17173cdn.com/a/money/2014/zq-pop/images/gb-yxxx.png") no-repeat;cursor:pointer;display:none}.gb-zqfix-v2-c2{border:#edecec solid 1px;border-radius:5px;background-color:#fff;width:120px;color:#a5a5a5}.gb-zqfix-v2-c2 .gb-bd-box{overflow:hidden}.gb-zqfix-v2-c2 .gb-bd-box-b{display:none}.gb-zqfix-v2-c2 .gb-hd{height:40px;position:relative;background-color:#ffd800}.gb-zqfix-v2-c2 .gb-hd-tit{font:bold 13px/28px "Microsoft YaHei";color:#333;padding:6px 3px 6px 13px;overflow:hidden;height:28px;white-space:nowrap}.gb-zqfix-v2-c2 .gb-zqfix-close{display:block;width:22px;height:22px;cursor:pointer;background:url("http://ue.17173cdn.com/a/money/2014/zq-pop/images/gb-zqpop-theme-v2.png") 0 -50px no-repeat;position:absolute;right:-11px;top:-11px}.gb-zqfix-v2-c2 .gb-zqfix-close:hover{background-position:-50px -50px}.gb-zqfix-v2-c2 .gb-bd{padding:5px}.gb-zqfix-v2-c2 .gb-bd-gameimg img{width:109px;height:61px;border:#f5f4f4 solid 1px}.gb-zqfix-v2-c2-c1{border-bottom:#dcdcdc dashed 1px;color:#333;height:29px;line-height:29px;clear:both;margin-bottom:9px;white-space:nowrap}.gb-zqfix-v2-c2-c1 .redu{color:#ec6333;font-size:16px;font-weight:bold;line-height:29px}.gb-zqfix-v2-c2-c2 .gb-item{overflow:hidden;*zoom:1;margin-bottom:8px}.gb-zqfix-v2-c2-c2 .gb-item .label{color:#a5a5a5;padding:2px 3px;background-color:#f5f3e8;float:left;border-radius:3px}.gb-zqfix-v2-c2-c2 .gb-item .con{margin-left:33px;color:#a5a5a5;line-height:15px;float:none;display:block;width:auto}.gb-zqfix-v2-c2-c2 .gb-item .link-a{color:#0062ca}.gb-zqfix-v2-c2-c2 .gb-item-r2 .con{color:#333}.gb-zqfix-v2-c2-c3{margin-top:10px;font-size:0}.gb-zqfix-v2-c2-c3 a{display:block;line-height:16px;text-align:center;font-size:12px;color:#fff;font-family:"Microsoft YaHei";background:#82b71a;border-radius:3px;padding:8px 10px 8px 6px}.gb-zqfix-v2-c2-c3 a:hover{background-color:#a6df33;text-decoration:none}.gb-zqfix-v2-c2-c4{overflow:hidden;*zoom:1;padding:15px 0 5px 5px}.gb-zqfix-v2-c2-c4 .gb-item{line-height:20px;height:20px;overflow:hidden}.gb-zqfix-v2-c2-c4 .gb-item a{text-decoration:underline;color:#ec6333}.gb-zqfix-v2-c2-c4 .gb-item a:hover{text-decoration:none}.gb-zqfix-v2-c2 .gb-fd{position:relative;*zoom:1}.gb-zqfix-v2-c2 .gb-fd .seting-box{height:18px;line-height:18px;background:url("http://ue.17173cdn.com/a/money/2014/zq-pop/images/gb-zqpop-theme-v2.png") 0 0 no-repeat;overflow:hidden;padding:6px 0 6px 8px;_background-color:#f4f3f3}.gb-zqfix-v2-c2 .gb-fd .seting-box input{vertical-align:middle}.gb-zqfix-v2-c2 .gb-fd .todo-scan{position:absolute;right:0;bottom:0;_right:1px;_bottom:1px;background:url("http://ue.17173cdn.com/a/money/2014/zq-pop/images/gb-zqpop-theme-v2.png") -100px -50px no-repeat;width:46px;height:46px;cursor:pointer}.gb-zqfix-v2-c2 .gb-fd .todo-scan:hover{opacity:.6}.gb-zqfix-v2-c3-c1{text-align:center;padding:3px 0}.gb-zqfix-v2-c3-c1 .scan-app-link{width:103px;height:103px;margin:0 auto;clear:both}.gb-zqfix-v2-c3-c2 .a-app-link{color:#ec6333;line-height:20px;font-size:14px;display:block;text-align:center;padding:13px 0;text-decoration:underline}.gb-zqfix-v2-c3-c2 .a-app-link:hover{text-decoration:none}.gb-zqfix-v2-c3-c3{color:#a5a5a5;line-height:20px;padding:3px;height:130px;_height:126px;overflow:hidden}.gb-zqfix-v2-c3-c4 .gb-history{background:#ffdc00;color:#333;text-align:center;height:24px;line-height:24px;display:block;border-radius:3px}.gb-zqfix-v2-c3-c4 .gb-history:hover{background:#ffe700}.gb-zqfix-box-v2 .gb-add1{position:absolute;color:red;display:none}');var e=function(a){var b={gameId:"10345",elem:$("body")[0],zIndex:990,ewm:"http://ue2.17173cdn.com/a/money/2014/zq-pop/images/gb-scan-app.jpg",ewmLink:"http://a.17173.com/tg/channel/index.html?id=A0019004220",testingLink:"http://newgame.17173.com/testing-list.html",hotList:[{lable:"14\u5e74\u6700\u4f73\u4f5c\u8005\u8bc4\u9009",link:"http://zj.17173.com/zt/act/index.shtml"},{lable:"\u70ed\u6e38\u6625\u8282\u793c\u5305\u7cbe\u9009",link:"http://newgame.17173.com/news/02102015/155606175_1.shtml"}]},c=$.extend(b,a);(function(){function d(){window.gamePopupHotList&&$.isArray(window.gamePopupHotList)&&(b.hotList=window.gamePopupHotList,c=$.extend(b,a))}$.ajax({url:"http://newgame.17173.com/script/gamepopupcmsconfig.js",dataType:"script",scriptCharset:"UTF-8",success:d})})();var d="cookie_game_votes",e=function(a,b){if(a===null||a===undefined)return;return b===undefined&&(b=a.url,a=a.name),'<a href="'+b+'" target="_blank" class="link-a" title="'+a+'">'+a+"</a>"};(function(a){function d(){b++;if(b==3){var d=f(a);g(d,c)}}var b=0;$.ajax({url:"http://d1.17173.itc.cn/newgame/info/js/"+a+".js",dataType:"script",scriptCharset:"gbk",success:d}),$.ajax({url:"http://d1.17173.itc.cn/game-top/info/js/"+a+".js",dataType:"script",scriptCharset:"gbk",success:d}),$.ajax({url:"http://d1.17173.itc.cn/hao/giftlist/js/"+a+".js",dataType:"script",scriptCharset:"utf-8",success:d})})(c.gameId);var f=function(a){var b={},c={};try{b=window.DATASTORE["game-top.info"][a]}catch(f){}try{c=window.DATASTORE["game-detail.info"][a]}catch(f){}var g=null;c.curr_test_info&&(g=new Date(parseInt(c.curr_test_info.test_time+"000",10)),g=g.getFullYear()+"-"+(g.getMonth()*1+1)+"-"+g.getDate());var h={id:a,name:c.game_name,newGameUrl:c.game_url,logoPic:c.large_logo||c.logo_pic,type:e(c.game_frame)+"/"+e(c.game_style)+"/"+e(c.game_theme)+"/"+e(c.game_type),developer:e(c.dev_company),operator:e(c.sp_info),officialSiteName:"\u56fd\u670d\u5b98\u7f51",officialSiteUrl:c.sp_info.game_official_url,rankType:b.rank_type,rank:b.rank_num,totalGames:b.total_game_count,votes:b.heats_num,voteUrl:c.vote_url,downloadUrl:c.download_url,testDate:g,placeOfProduction:c.game_area.name};c.curr_test_info&&(h.status=c.curr_test_info.test_type,h.testTitle=c.curr_test_info.test_type);var i,j,k=new RegExp("(^| )"+d+h.id+"=([^;]*)(;|$)");j=document.cookie.match(k),j&&(i=window.unescape(j[2])),i&&i>h.votes&&(h.votes=i);try{var l=window.DATASTORE["hao.giftlist"][a];l&&l.list&&l.list.length&&(h.giftName=l.list[0].gift_name,l.list.length<2?h.giftUrl=l.list[0].gift_url:h.giftUrl=l.url)}catch(f){}return h},g=function(a,b){function x(){var a=$(document).width();a>1366&&r(t)!="minimized"?(g.hide(),j.show()):(g.show(),j.hide())}var c=function(a,b){var c="",d=[],f=b.hotList;d.push('\t<div class="gb-zqfix-box-v2">'),d.push('        <div class="gb-zqfix-v2-c1"></div>'),d.push('        <div class="gb-zqfix-v2-c2">'),d.push('            <div class="gb-hd">'),d.push('            \t<h2 class="gb-hd-tit">'+a.name+"</h2>"),d.push('                <a href="javascript:;" class="gb-zqfix-close"></a>'),d.push("            </div>"),d.push('            <div class="gb-bd-box gb-bd-box-a" id="gbBdA">'),d.push('                <div class="gb-bd">'),d.push('                    <a href="'+a.newGameUrl+'" target="_blank" title="'+a.name+a.officialSiteName+'" class="gb-bd-gameimg"><img src="'+a.logoPic+'" width="109" height="61"></a>'),d.push('                    <div class="gb-zqfix-v2-c2-c1">');var g=a.rankType||"",h="\u65b0\u6e38\u671f\u5f85\u699c",i="\u540d";g.toUpperCase()=="HOT"&&(h="\u70ed\u6e38\u6392\u884c\u699c"),parseInt(a.rank,10)<=999&&(i=" "+i),d.push("                        "+h+':<a href="javascript:;" class="redu" title="\u70b9\u51fb\u6295\u7968">'+a.rank+"</a>"+i),d.push("                    </div>"),d.push('                    <ul class="gb-zqfix-v2-c2-c2">'),d.push('                        <li class="gb-item">'),d.push('                            <span class="label">\u7c7b\u578b</span> '),d.push('                            <div class="con">'),d.push("                                "+a.type+""),d.push("                            </div>"),d.push("                        </li>"),d.push('                        <li class="gb-item gb-item-r2">'),d.push('                            <span class="label">\u6d4b\u8bd5</span>'),d.push('                            <div class="con">'),d.push('                                <a href="'+b.testingLink+'" target="_blank" class="link-a">'+a.testDate+"<br/>"+a.testTitle+"</a>"),d.push("                            </div>"),d.push("                        </li>"),d.push("                    </ul>"),d.push('                    <div class="gb-zqfix-v2-c2-c3">'),d.push("                        "+e(a)+""),d.push("                    </div>");if($.isArray(f)&&f.length>0){d.push('                    <ul class="gb-zqfix-v2-c2-c4">');for(var j=0;j<f.length;j++){var k=f[j];d.push('                        <li class="gb-item"><a href="'+k.link+'" title="'+k.lable+'" target="_blank">'+k.lable+"</a></li>");if(j>=2)break}d.push("                    </ul>")}return d.push("                </div>"),d.push('                <div class="gb-fd">'),d.push('                    <div class="seting-box"><label><input type="checkbox" value=""> \u4e0d\u518d\u5f39\u51fa</label></div>'),d.push('                    <a href="javascript:;" title="\u70b9\u6b64\u626b\u7801" class="todo-scan"></a>'),d.push("                </div>"),d.push("            </div>"),d.push('            <div class="gb-bd-box gb-bd-box-b" id="gbBdB">'),d.push('            \t<div class="gb-bd">'),d.push('                    <div class="gb-zqfix-v2-c3-c1">'),d.push('                        <a href="'+b.ewmLink+'" target="_blank" class="scan-app-link"><img src="'+b.ewm+'" width="103" height="103" alt="17173app"></a>'),d.push("                    </div> "),d.push('                    <div class="gb-zqfix-v2-c3-c2">'),d.push('                    \t<a href="'+b.ewmLink+'" target="_blank" class="a-app-link">\u626b\u4e00\u626b<br/>\u4e0b\u8f7d\u5ba2\u6237\u7aef</a>'),d.push("                    </div>"),d.push('                    <div class="gb-zqfix-v2-c3-c3">'),d.push("                    17173\u624b\u673a\u5ba2\u6237\u7aef\u63d0\u4f9b\u6700\u65b0\u6e38\u620f\u8d44\u8baf\u3001\u653b\u7565\uff0c\u72ec\u5bb6\u793c\u5305\u798f\u5229\uff0c\u6d77\u91cf\u89c6\u9891\u4e0e\u76f4\u64ad\u7b49\uff0c\u4f60\u8fd8\u5728\u7b49\u4ec0\u4e48\uff01"),d.push("                    </div>"),d.push('                    <div class="gb-zqfix-v2-c3-c4">'),d.push('                    \t<a href="javascript:;" class="gb-history">\u8fd4 \u56de</a>'),d.push("                    </div>"),d.push("                </div><!--end .gb-bd-->"),d.push("            </div><!--end #gbBdB-->"),d.push("      </div><!--end .gb-zqfix-v2-c2-->"),d.push("    </div><!--end .gb-zqfix-box-v2-->"),c=d.join(""),c},e=function(a){return a.giftUrl&&a.giftName?'<a href="'+a.newGameUrl+'" target="_blank">'+a.giftName+"<br>\u706b\u70ed\u53d1\u653e\u4e2d&gt;&gt;</a>":""},f=$(c(a,b)).appendTo(b.elem);f.css("z-index",b.zIndex);var g=f.find(".gb-zqfix-v2-c1"),h=f.find(".gb-zqfix-close"),i=f.find(".seting-box input:checkbox"),j=f.find(".gb-zqfix-v2-c2"),k=f.find("#gbBdA"),l=f.find("#gbBdB"),m=f.find(".todo-scan"),n=f.find(".gb-history"),o=$(".redu",f),p=$(".redu",f),q=function(a,b,c){var d=a+"="+escape(b);if(c){var e=new Date;e.setTime(e.getTime()+c),d+="; expires="+e.toGMTString()+"; path=/"}document.cookie=d},r=function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return b!==null?unescape(b[2]):null},s=function(a){var b=new Date;b.setTime(b.getTime()-1);var c=r(a);c!==null&&q(a,"",864e6)},t="cookie_pop_zq2";r(t)=="minimized"?(g.show(),j.hide(),i.attr("checked","checked")):(g.hide(),j.show(),i.removeAttr("checked")),g.click(function(){g.hide(),j.show(),k.fadeIn(),l.hide(),$(window).bind("resize",x),!!window.ActiveXObject&&!window.XMLHttpRequest&&f.animate({top:$(window).height()-f.height()+$(window).scrollTop()+"px"},800)}),i.click(function(){$(this).attr("checked")===!0?q(t,"minimized",864e6):s(t)}),h.click(function(){j.hide(),g.fadeIn(),$(window).unbind("resize",x),!!window.ActiveXObject&&!window.XMLHttpRequest&&f.animate({top:$(window).height()-f.height()+$(window).scrollTop()+"px"},800)}),n.click(function(){l.hide(),k.fadeIn()}),m.click(function(){k.hide(),l.fadeIn()});var u=function(b){var c={status:""};c.count=parseInt(p.text(),10),$.ajax({url:"http://top.17173.com/api-voteJp",dataType:"jsonp",data:{gameCode:a.id,referer:document.referrer},error:function(){c.status="fault",b(c)},success:function(a){if(a){var e=a.ret;e===0?(c.count++,q(d+a.id,c.count,864e5),c.status="ok"):e==1004?c.status="repeat":c.status="fault",b(c)}}})};o.click(function(){var a=$(this);u(function(b){if(b.status=="ok"){var c=a.position(),d=$('<span class="gb-add1" style="width: 80px; display: block;">\u652f\u6301 +1</span>');$(".gb-zqfix-box-v2").append(d),d.css({left:c.left,top:c.top-a.height()+5,display:"block"}).animate({top:c.top-a.height()-10,opacity:0},1e3,function(){d.remove()})}else b.status=="fault"?alert("\u6295\u7968\u5931\u8d25"):b.status=="repeat"&&alert("\u60a8\u5df2\u6295\u8fc7\u7968")})});if(!!window.ActiveXObject&&!window.XMLHttpRequest){var v=!0,w=function(){f.animate({top:$(window).height()-f.height()+$(window).scrollTop()+"px"},800),v=!0};$(window).scroll(function(){v&&(setTimeout(w,500),v=!1)})}$(window).bind("resize",x),x()}};c.exports=e})